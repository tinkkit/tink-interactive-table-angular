/*! tink-interactive-table-angular v3.3.2 */
"use strict";!function(module){try{module=angular.module("tink.interactivetable")}catch(e){module=angular.module("tink.interactivetable",["tink.popover","tink.sorttable","tink.tooltip","tink.safeApply","tink.pagination"])}module.directive("tinkInteractiveTable",[function(){return{restrict:"EA",priority:1500.1,replace:!0,compile:function(tElement,tAttrs){$(tElement.find("thead tr")[0]).prepend($('<th ng-if="(hasActions() && NotAllActionsAreVisibleAllTheTime()) || tinkShowCheckboxes" class="has-checkbox"><div class="checkbox"><input type="checkbox" ng-click="checkAll($event)" ng-class="{indeterminate:true}"  ng-checked="checked().length === tinkData.length" indeterminate id="{{$id}}-all" name="{{$id}}-all" value=""><label for="{{$id}}-all"></label></div></th>'));var td=$('<td ng-show="(hasActions() && NotAllActionsAreVisibleAllTheTime()) || tinkShowCheckboxes" ng-click="prevent($event)"><input type="checkbox" ng-change="checkChange(tinkData[$index])" ng-model="tinkData[$index].checked" id="{{$id}}-{{$index}}" name="{{$id}}-{{$index}}" value=""><label for="{{$id}}-{{$index}}"></label></td>');return $(tElement.find("tbody tr")[0]).prepend(td),tAttrs.tinkHideBackgroundOfSelectedRows!==!0&&"true"!==tAttrs.tinkHideBackgroundOfSelectedRows&&$(tElement.find("tbody tr")[0]).attr("ng-class","{'is-selected':tinkData[$index].checked}"),$(tElement.find("tbody")[0]).append('</tr><tr ng-show="!tinkLoading && (tinkData.length === 0 || tinkData === undefined || tinkData === null)"><td colspan="{{tinkHeaders.length+1}}">{{tinkEmptyMessage}}</td></tr>`'),$(tElement.find("thead tr")[0]).find("th").each(function(index){index>0&&$(this).attr("ng-if","tinkHeaders[$index].checked")}),tAttrs._tr=$(tElement.find("tbody tr")).clone(),tAttrs._th=$(tElement.find("thead tr")).clone(),{post:function(scope,attr){scope._tr=attr._tr}}}}}]),module.controller("interactiveCtrl",["$scope","$attrs","$element","$compile",function($scope,$attrs,$element,$compile){var ctrl=this;ctrl.replaceBody=function(){var tbody=$element.find("tbody"),thead=$element.find("thead");tbody.html(""),thead.html(""),$element.find("table").addClass("table-interactive");var trClone=$attrs._tr.clone(),thClone=$attrs._th.clone();tbody.append(trClone),thead.append(thClone),tbody.find("tr:first td").each(function(index){index>0&&$scope.tinkHeaders&&$scope.tinkHeaders[index-1]&&$(this).attr("ng-if","tinkHeaders["+(index-1)+"].checked")}),$compile(trClone)($scope),$compile(thClone)($scope)},$scope.prevent=function($event){$event.stopPropagation()},ctrl.changeColumn=function(a,b){a+=1,b+=1,ctrl.swapTds(a,b),ctrl.replaceBody($attrs._tr)},ctrl.swapTds=function(a,b){var td1=$attrs._tr.find("td:eq("+a+")"),td2=$attrs._tr.find("td:eq("+b+")");b>a?td1.detach().insertAfter(td2):a>b&&td1.detach().insertBefore(td2)}}]),module.directive("tinkInteractiveTable",["$compile","$rootScope","safeApply","$filter",function($compile,$rootScope,safeApply,$filter){return{restrict:"EA",transclude:!0,priority:1500,replace:!0,scope:{tinkData:"=",tinkHeaders:"=",tinkActions:"=",tinkAllowColumnReorder:"=",tinkLoading:"=",tinkEmptyMessage:"@",tinkForceResponsive:"=",tinkChecked:"&",tinkShowCheckboxes:"=",tinkHideBackgroundOfSelectedRows:"="},controller:"interactiveCtrl",templateUrl:"templates/interactive-table.html",compile:function(){return{post:function(scope,iElement,iAttrs,controller){function getDataWithNoAlwaysEnabledButtons(master){for(var data=[],i=scope.tinkActions.length-1;i>=0;i--)scope.tinkActions[i]&&scope.tinkActions[i].alwaysEnabled!==!0&&scope.tinkActions[i].master===master&&data.push(scope.tinkActions[i]);return data}scope.forceResponsive=function(){return scope.tinkForceResponsive===!0||"true"===scope.tinkForceResponsive?!0:!1},scope.forceResponsive()&&iElement.find("table").wrap('<div class="table-force-responsive"></div>'),$compile($(iElement.children()[1]).children())(scope),controller.replaceBody(),scope.actionConf={};var breakpoint={};breakpoint.refreshValue=function(){var screenSize=window.getComputedStyle(document.querySelector("body"),":before").getPropertyValue("content").replace(/\'/g,"").replace(/\"/g,"");"phone-view"===screenSize||"tablet-view"===screenSize?scope.actionConf.menu=!0:scope.actionConf.menu=!1},$(window).resize(function(){safeApply(scope,function(){breakpoint.refreshValue()})}),breakpoint.refreshValue(),scope.$watch("tinkLoading",function(newV){newV?iElement.find("table").addClass("is-loading"):iElement.find("table").removeClass("is-loading")}),scope.selected={value:-1},scope.select=function(e,index){e.preventDefault(),scope.selected.value=index},scope.allChecked=!1,scope.masterObject=function(){return getDataWithNoAlwaysEnabledButtons(!0)},scope.subObject=function(){return getDataWithNoAlwaysEnabledButtons(!1)},scope.actionCallBack=function(c){if(0!==scope.checked().length||c.alwaysEnabled===!0){var array=$.grep(scope.tinkData,function(a){return a.checked});c.callback instanceof Function&&c.callback(array)}scope.close()},scope.close=function(){$rootScope.$broadcast("popover-open",{group:"option-table-2",el:$("<div><div>")})},scope.checkAll=function(){var array=[];if(scope.tinkData&&(array=$.grep(scope.tinkData,function(a){return a.checked})),array.length===scope.tinkData.length){for(var i=0,len=scope.tinkData.length;len>i;i++)scope.tinkData[i].checked=!1;scope.allChecked=!1}else{for(var j=0,len1=scope.tinkData.length;len1>j;j++)scope.tinkData[j].checked=!0;scope.allChecked=!0}},scope.checked=function(){return scope.tinkData&&scope.tinkData.length>0?$.grep(scope.tinkData,function(a){return a.checked}):[]},scope.checkChange=function(data){var array=$.grep(scope.tinkData,function(a){return a.checked});scope.tinkChecked&&scope.tinkChecked({$data:data,$checked:data.checked}),array.length===scope.tinkData.length?scope.allChecked=!0:0===array.length?scope.allChecked=!1:scope.allChecked=!1},scope.elemDisabled=function(action){return action?action.alwaysDisabled?!0:action.checkedAll?scope.tinkData.length===scope.checked().length?!1:!0:(0===scope.checked().length||action.single&&scope.checked().length>1)&&action.alwaysEnabled!==!0:void 0},scope.switchPosition=function(a,b){scope.tinkHeaders.move(a,b),controller.changeColumn(a,b)},scope.NotAllActionsAreVisibleAllTheTime=function(){return scope.tinkActions&&$filter("filter")(scope.tinkActions,{alwaysEnabled:!0}).length!==scope.tinkActions.length},scope.MoreActions=function(){var moreArry=[],notEnabled=$filter("tinkFilterFalse")(scope.tinkActions,{},"alwaysEnabled",!1),master=$filter("filter")(notEnabled,{master:!0}),sub=$filter("filter")(notEnabled,{master:!1});if(master&&master.length>5)moreArry=master.slice(5),moreArry=moreArry.concat(sub);else if(master&&sub&&master.length+sub.length>5)return sub.slice(5-sub.length);return moreArry},scope.hasActions=function(){return(void 0!==scope.tinkActions||null!==scope.tinkActions)&&scope.tinkActions instanceof Array&&scope.tinkActions.length>0?!0:!1},scope.arrowUp=function(){scope.selected.value>0&&(scope.switchPosition(scope.selected.value,scope.selected.value-1),scope.selected.value-=1)},scope.arrowDown=function(){scope.selected.value<scope.tinkHeaders.length-1&&(scope.switchPosition(scope.selected.value,scope.selected.value+1),scope.selected.value+=1)},Array.prototype.swap=function(a,b){var temp=this[a];this[a]=this[b],this[b]=temp},Array.prototype.move=function(oldIndex,newIndex){if(newIndex>=this.length)for(var k=newIndex-this.length;k--+1;)this.push(void 0);return this.splice(newIndex,0,this.splice(oldIndex,1)[0]),this}}}}}}]).filter("tinkActionFilter",["$filter",function($filter){return function(input,optional1,optional2){if(!input)return[];for(var data=[],i=input.length-1;i>=0;i--)input[i]&&input[i].alwaysEnabled!==!0&&data.push(input[i]);data.reverse();var master=$filter("filter")(optional1,{master:!0});return master?"master"===optional2?master.length<5?data:data.slice(0,5):master.length>=5?[]:data.slice(0,5-master.length):[]}}]).filter("tinkFilterFalse",["$filter",function($filter){return function(input,optional1,optional2,optinal3){(optinal3!==!1||optinal3!==!0)&&(optinal3=!0);var newInput=$filter("filter")(input,optional1),data=[];if(newInput&&newInput.length>0)for(var i=newInput.length-1;i>=0;i--)newInput[i]&&newInput[i][optional2]!==optinal3&&data.push(newInput[i]);return data.length<=0?[]:data}}]).filter("tinkSlice",function(){return function(arr,start){return(arr||[]).slice(start)}}).directive("tinkShiftSort",["$timeout",function(timeout){return{restrict:"A",controller:"interactiveCtrl",link:function(scope,elem){timeout(function(){Sortable.create(elem.find("ul").get(0),{ghostClass:"draggable-placeholder",animation:200,handle:".draggable-elem",onStart:function(){scope.$apply(function(){})},onUpdate:function(evt){scope.$apply(function(){var oldIndex=evt.oldIndex,newIndex=evt.newIndex;scope.selected.value=evt.newIndex,scope.switchPosition(oldIndex,newIndex)})}})},200)}}}])}(),angular.module("tink.interactivetable").run(["$templateCache",function($templateCache){$templateCache.put("templates/actions.html",'<div class=popover-menu-list>  <ul ng-if=!actionConf.menu> <li data-ng-repeat="action in MoreActions()" data-ng-disabled=elemDisabled(action) data-ng-click=actionCallBack(action)> <i class="fa {{action.icon}} fa-fw"></i>\n<span>{{action.name}}</span> </li> </ul>  <ul ng-if=actionConf.menu> <li data-ng-repeat="action in tinkActions | filter: { master: true } | tinkActionFilter: tinkActions : \'master\' | orderBy:\'+order\'" data-ng-disabled=elemDisabled(action) data-ng-click=actionCallBack(action)> <i class="fa {{action.icon}} fa-fw"></i>\n<span>{{action.name}}</span> </li> <hr ng-if="masterObject().length > 0 && subObject().length > 0"> <li data-ng-repeat="action in tinkActions | filter: { master: false } | tinkActionFilter: tinkActions | orderBy:\'+order\'" data-ng-disabled=elemDisabled(action) data-ng-click=actionCallBack(action)> <i class="fa {{action.icon}} fa-fw"></i>\n<span>{{action.name}}</span> </li> </ul> </div>'),$templateCache.put("templates/columns.html",'<div class=table-interactive-options tink-shift-sort>  <div class=table-interactive-sort> <button class=btn-borderless data-ng-disabled="selected.value<1" data-ng-click=arrowUp()><i class="fa fa-arrow-up"> </i></button>\n<button class=btn-borderless data-ng-disabled="selected.value<0 || selected.value === tinkHeaders.length-1" data-ng-click=arrowDown()><i class="fa fa-arrow-down"></i></button> </div>  <ul data-ng-model=tinkHeaders class=table-interactive-cols>  <li data-ng-repeat="header in tinkHeaders"> <div class="checkbox is-selectable is-draggable" data-ng-class="{selected:selected.value===$index}"> <input data-ng-disabled="header.disabled === true" type=checkbox data-ng-model=header.checked id=t-{{$index}}{{header.alias}} name=t-{{$index}}{{header.alias}} value={{header.alias}} checked> <label for=t-{{$index}}{{header.alias}}><span class=draggable-elem data-ng-class="{selected:selected.value===$index}" data-ng-click=select($event,$index)> <span data-ng-if="header.alias && !header.sortalias">{{header.alias}}</span>\n<span data-ng-if="header.alias && header.sortalias"><em>{{header.sortalias}}</em></span>\n<span data-ng-if="!header.alias && !header.sortalias">—</span>\n<span data-ng-if="!header.alias && header.sortalias"><em>{{header.sortalias}}</em></span> </span></label> </div> </li> </ul> <div class=table-interactive-sort>  <button class=btn-xs data-ng-click=close()>Sluiten</button> </div> </div>'),$templateCache.put("templates/interactive-table.html",'<div> <div class="bar table-interactive-bar"> <ul data-ng-if=!actionConf.menu class="bar-left table-interactive-actions"> <li data-ng-if="(masterObject().length + subObject().length) > 0" data-ng-repeat="action in tinkActions | orderBy:\'+order\' | filter: { master: true } | tinkActionFilter: tinkActions : \'master\'"> <button class=btn-sm data-ng-disabled=elemDisabled(action) data-ng-click=actionCallBack(action)> <i class="fa {{action.icon}} fa-fw"></i>\n<span>{{action.name}}</span> </button> </li> <li class=hr data-ng-if="hasActions() && masterObject().length > 0 && subObject().length > 0"></li> <li data-ng-repeat="action in tinkActions | orderBy:\'+order\' | tinkFilterFalse :{}: \'master\' |tinkActionFilter: tinkActions "> <button class=btn-sm data-ng-disabled=elemDisabled(action) data-ng-click=actionCallBack(action)> <i class="fa {{action.icon}} fa-fw"></i>\n<span>{{action.name}}</span> </button> </li> <li data-ng-if="MoreActions().length > 0" tink-popover tink-popover-group=option-table tink-popover-template=templates/actions.html> <span> <button class=btn-sm data-ng-disabled=elemDisabled(action)> <i class="fa fa-ellipsis-h fa-fw"></i>\n<span>Meer acties</span> </button> </span> </li> </ul> <ul data-ng-if=actionConf.menu class="bar-left table-interactive-popover-actions"> <li ng-if="(masterObject().length + subObject().length) > 0"> <button class=btn-sm tink-popover tink-popover-group=option-table-1 tink-popover-template=templates/actions.html>Acties <i class="fa fa-caret-down"></i></button> </li> </ul> <ul class=bar-right> <li data-ng-repeat="action in tinkActions | tinkFilterFalse: {alwaysEnabled:true} : \'notSmall\'  | orderBy:\'+order\'"> <button class=btn-sm data-ng-click=actionCallBack(action) tink-tooltip={{action.name}} tink-tooltip-align=top> <i class="fa {{action.icon}} fa-fw"></i>  </button> </li> <li data-ng-repeat="action in tinkActions | tinkFilterFalse: { alwaysEnabled: true,notSmall:true}  | orderBy:\'+order\'"> <button class=btn-sm data-ng-click=actionCallBack(action)> <i class="fa {{action.icon}} fa-fw"></i>\n<span>{{action.name}}</span> </button> </li> <li data-ng-if="tinkAllowColumnReorder !== false"> <button class=btn-sm tink-popover tink-popover-group=option-table tink-popover-template=templates/columns.html>Kolommen <i class="fa fa-caret-down"></i></button> </li> </ul> </div> <div data-ng-transclude></div> </div>')}]);
//# sourceMappingURL=tink-interactive-table-angular.min.map